version: "3.4"
services:
  rust-dev:
    build:
      context: .
      dockerfile: Dockerfile.rust
      target : build-env
    volumes:
      - ./api:/app
    tty: true
    command: ["bash"]  # 開発用シェルを起動

  rust-prod:
    build:
      context: .
      dockerfile: Dockerfile.rust
      target : production
    ports:
      - "80:80"  # 本番環境のポート設定